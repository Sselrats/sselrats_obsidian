
## 1. 데이터베이스 전체 테이블 목록

### 1.1 어드민 사용자 (상담사)
- `consultants` - 상담사 : 로그인 세션은 jwt로 관리 
	- id
	- name
	- email
	- phone
	- status
	- register_number
	- affiliation
	- subscription
	- is_super

### 1.2 고객
- `customers` - 고객 기본 정보
	- id
	- name
	- birth_date
	- phone
- `sessions` - 고객 로그인 (정확히는 본인인증) 세션 (jwt 대신 세션 : 로그인 기기 저장)
- `customer_details` - 고객 상세 정보, 업데이트 하면 누적 되도록
	- id (PK)
	- customer_id 
	- income_type (ENUM: 직장인, 사업자, 겸업) 
	- annual_income 
	- employment_insurance (4대보험 여부) 
	- kcb_score
	- nice_score 
	- business_number (사업자번호) 
	- business_start_date 
	- owned_properties_count 
	- required_amount (필요금액)
	
### 1.3 상담 물건, 기존 대출
- `properties` - 담보 물건 정보
	- id
	- customer_id
	- address_full
	- sido (시도) 
	- sigungu (시군구) 
	- dong 
	- detail_address 
	- property_type (아파트 등)
	- exclusive_area (전용면적) 
	- households (세대수) 
	- building_age (년차) 
	- kb_lower_price 
	- kb_standard_price 
	- kb_upper_price 
	- latest_transaction_price (최근실거래가)
- `existing_mortgages` - 기존 대출 정보
	-  id (PK)
	- property_id (FK)
	- creditor (채권자)
	- mortgage_amount (설정액)
	- remaining_balance (잔액)
	- mortgage_type (ENUM: 가계, 사업자)
	- registration_date (대출일)
	- maturity_date (만기일)

### 1.4 금융 상품 및 정책
- `financial_institutions` - 금융기관
	- financial_institutions
	- id (PK)
	- name (예: 현캐, 지방은행)
	- type (ENUM: 캐피탈, 저축은행, 보험사, 은행)
	- is_active
	
- `products` - 금융 상품
	- id (PK)
	- institution_id (FK)
	- product_name (예: 현캐 가계대출)
	- loan_type (ENUM: 가계, 사업자, 조합)
	- priority_type (ENUM: 선순위, 후순위)
	- is_active
	
- `ltv_policies` - 상품별 정책 (LTV, DSR 등)
	- id (PK)
	- product_id (FK)
	- effective_date
	- expired_date
	- priority_type
	- ltv_ratio (예: 70 -> 70%)
	- max_amount (최대한도, NULL이면 무제한)
	- conditions (JSON: 추가조건)
	
- region_grade_policies - 급지 정책
	- id (PK)
	- effective_date
	- expired_date
	- region_type (ENUM: 수도권, 광역시, 군읍, 전국)
	- detailed_regions (JSON: ["서울", "수원", "성남"...])
	- grade (등급: A, B, C 등)
	- description 
	- exclusions (JSON: 제외지역)

- collateral_requirements - 담보물 제약 조건
	- id (PK)
	- product_id (FK)
	- effective_date
	- expired_date
	- property_type (ENUM: 아파트, 빌라, 단독, 오피스텔)
	- min_kb_value (KB시세 최소값)
	- min_households (최소 세대수)
	- max_building_age (최대 건축년수)
	- floor_restrictions (JSON: {"1층": "하한가", "2층": "일반가"})
	- region_restrictions (JSON: 지역제한)
	- special_conditions (TEXT: 기타 특이사항)
- credit_requirements - 신용 제한 조건
	- id (PK)
	- product_id (FK)
	- effective_date
	- expired_date
	- min_nice_score
	- min_kcb_score
	- max_overdue_days (최대연체일수)
	- additional_conditions (JSON)
- prepayment_fee_policies - 중도 상환 수수료
	- id (PK)
	- product_id (FK)
	- effective_date
	- expired_date
	- fee_type (ENUM: 고정, 슬라이딩)
	- year_fees (\[1.8, 1.6, 1.4\] (%))
	- calculation_method (JSON: 상세계산식)
- other_fees - 기타 수수료
	- id (PK)
	- product_id (FK)
	- effective_date
	- expired_date
	- fee_name (예: 중개수수료, 인지대)
	- fee_rate (%)
	- min_amount
	- max_amount

-- 계산
- loan_calculations 
	- id (PK)
	- customer_id (FK)
	- property_id (FK)
	- calculation_date
	- policy_snapshot (JSON: 사용된 정책 버전들)
	- results (JSON: 전체 계산 결과)
- product_calculation_results - 상품별 산출 결과
	- id (PK)
	- calculation_id (FK)
	- product_id (FK)
	- is_eligible (대출가능 여부)
	- priority_ltv (선순위 LTV)
	- priority_limit (선순위 한도)
	- priority_rate (선순위 금리)
	- secondary_ltv (후순위 LTV)
	- secondary_limit (후순위 한도)
	- secondary_rate (후순위 금리)
	- available_amount (가용금액)
	- rejection_reasons (JSON: 거절사유)
	- calculation_details (JSON: 상세계산과정)


### 1.5 상담, 업무 등
- `consultations` - 상담 건
	- id
	- customer_id
	- consultant_id
	- type (enum: 전화상담, 채팅상담)
	- status (ENUM: 상담대기, 상담중, 조회중, 심사중, 승인, 실행, 종료)
	- institution_id
	- institution_manager
- `consultation_memos` - 상담 메모
	- id
	- consultation_id
	- memo
	- attachments

- `offers` - 고객별 대출 제안

### 1.6 업무 관리 (3개 테이블)
- `tasks` - 할일
	- id
	- constultation_id
	- consultant_id
	- customer_id
	- deadline
	- priority (enum: 높음, 보통, 낮음)
	- status (enum: 대기, 진행중, 완료)

- `inquiries` - 문의? 이메일?

- `inquiry_requests` - 금융사 조회 요청
- `inquiry_responses` - 금융사 조회 응답

### 1.7 시스템 (3개 테이블)
- `verification_codes` - 휴대폰 인증 코드
- `audit_logs` - 감사 로그
- `system_settings` - 시스템 설정

**총 17개 테이블**